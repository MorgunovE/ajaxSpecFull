<!DOCTYPE html>
<html lang="ru">
<head>
	<title>Лабораторная работа 1</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta http-equiv="Content-Language" content="ru"/>
  <!--
    **
    **	Задание 1. Создание объекта XmlHttpRequest
    **
  -->
	<script type="text/javascript" src="../../xmlRequest.js"></script>
	<script type="text/javascript">
		/*
		**
		**	Задание 2. Выборка книги 
		**
		*/
    function getBookByNumber(bookId) {
      let request = getXmlHttpRequest()
      request.onreadystatechange = function() {
        if(request.readyState != 4) return;
        if(request.status != 200) {
        	alert('Some happened' + request.statusText)
	        return;
        }
        let divResult = document.getElementById('divResult')
        divResult.firstChild.nodeValue = request.responseText
      }
      request.open('GET', 'getbooktxt.php?num=' + bookId, true)
      request.send(null)
    }


    /*
    **
    **	Задание 3. Обработчик кнопки
    **
    */
    function showBook() {
      let num = document.getElementById('txtNum')
      getBookByNumber(num.value)
    }
	</script>
</head>
<body>
	<h1>Лабораторная работа 1</h1>
	<form action="#" onsubmit="return false">
		<label for="txtNum">Введите номер книги:</label>
		<input id="txtNum" type="text"/>
		<button onclick="showBook()">Поиск</button>
	</form>
	<div id="divResult">&nbsp;</div>
</body>
</html>